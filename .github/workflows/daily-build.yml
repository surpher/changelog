name: Daily

on: push

jobs:
  build_number:
    name: "🧪 Changelog for a build"
    runs-on: ubuntu-latest
    outputs:
      build_number: ${{ steps.buildnumber.output.build_number }}
    steps:
      - name: "#️⃣ Generate Build Number"
        id: buildnumber
        uses: einaregilsson/build-number@v2
        with:
          token: ${{ secrets.github_token }}
      - name: "🗒 Generate changelog"
        id: generate_changelog
        uses: heinrichreimer/action-github-changelog-generator@v2.1.1
        with:
          token: ${{ secrets.github_token }}            
          sinceTag: "build-number-${{ steps.buildnumber.output.build_number - 1 }}"
          stripHeaders: "true"
          stripGeneratorNotice: "true"

